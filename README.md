Конечно, вот исправленный текст с исправлением орфографических и синтаксических ошибок:

---

# WordCounter

## Входные данные

Напишите приложение на Qt с использованием QML, которое считывает слова из файла и выводит топ 15 слов (по количеству вхождений) в режиме реального времени в виде гистограммы. Приложение должно быть многопоточным - чтение и обработка файла должны происходить в отдельном от UI потоке, гистограмма должна обновляться в условно реальном времени (без видимых продолжительных задержек). Интерфейс приложения должен быть адаптивным и учитывать размеры текущего окна.

Приложение должно содержать следующие элементы интерфейса:
* Гистограмма (нежелательно использовать ChartView из модуля charts)
* Прогресс бар обработки открытого файла
* Кнопка "Открыть" для выбора файла, из которого будут считаны слова.
* Кнопка "Старт", для запуска чтения файла и подсчета статистики слов.
* Кнопка "Пауза" для приостановки чтения файла (опционально, наличие кнопки будет плюсом).
* Кнопка "Отмена" для прерывания чтения файла и сброса статистики (опционально, наличие кнопки будет плюсом).
* Существенным плюсом будет наличие README файла с описанием архитектуры и логики работы приложения.

## Архитектура приложения

```
@startuml Cheme

actor Bob

rectangle QML {
    rectangle "UI Components" {
        [ProgressBar]
        [BarChart]
        [Open Button]
        [Start Button]
        [Pause Button]
        [Stop Button]
    }
}

rectangle "Application" {
    [Core] --> [FileManager]
    [Core] --> [FileReader]
    [Core] --> [VocabularyModel]
    [Core] --> [VocabularyCreator]
    [Core] --> [ProgressBar]
    [Core] --> [UIMediator]

    [UIMediator] <--> [QML]

    Bob --> [QML]

    [Core] <--> [UIMediator]
    [UIMediator] <--> [QML]
}

@enduml
```

![Схема взаимодействия](./Sheme.jpg)

Данное приложение было разбито на модули по логическому принципу. Основное разбиение на UI и backend часть, далее backend был поделен еще на:
* Core часть
* Модуль чтения из файла
* Модуль-посредник между UI и backend (что-то вроде фасада, но без логики)
* Модуль, отвечающий за путь к файлу
* Модуль - Progress bar
* Модель с данными, которые выводятся в гистограмму.

Центральную роль здесь играет класс Core, посредник между всеми остальными модулями. 

## Логика работы

После создания окна, пользователь получает возможность выбрать файл и запустить подсчет слов.

**Поток один**
* Подсчет реализован через последовательный проход по каждому символу файла. При достижении пробела "слово" сохраняется в map (где ключ - само слово, а значение - количество этих слов), значение увеличивается на одно. 

**Поток два**
* Вместе с чтением файла другой поток перекладывает map в multimap, меняя key и value местами (теперь ключ - это количество повторений слова, а значение - само слово). Это действие позволяет автоматически отсортировать контейнер. Далее из него берется 15 первых значений и передается в модель.

Модель выводит "словарь" в виде гистограммы.

## Как задумывалось

Подразумевалось сделать каждый модуль как интерфейсный класс. При этом максимально разделить все модули с помощью центрального класса. Два потока должны работать независимо. Поток, который читает, должен складывать в память слова, поток, который подсчитывает, должен читать их из памяти.

## Что получилось

На данном этапе (23:22 29.05.2024) есть проблемы с синхронизацией. Часть багов была пофикшена, часть осталась:
* При запущенных потоках (не совсем, чуть раньше) не обновляется QML (properties заэмичены), ни progress bar, ни гистограмма. При этом по завершении подсчета гистограмма обновляется и progress bar становится на 100%. При этом само значение property обновляется корректно, и данные в модели тоже.
* Иногда падает приложение. Падает на записи данных в модель (именно на записи, при удалении все нормально, хотя это не 100 процентов, просто не попадалось).

Эти баги пофиксить не успел

Также дизайн приложения такой себе. Здесь мое внимание не было сконцентрировано, так как хотелось сделать красивую архитектуру, а впоследствии появились баги, и нужно было их фиксить.

